Element.prototype.hasClass=function(e){return new RegExp(" "+e+" ").test(" "+this.className+" ")},Element.prototype.addClass=function(e){return this.hasClass(e)||(this.className+=" "+e),this},Element.prototype.removeClass=function(e){var t=" "+this.className.replace(/[\t\r\n]/g," ")+" ";if(this.hasClass(e)){for(;t.indexOf(" "+e+" ")>=0;)t=t.replace(" "+e+" "," ");this.className=t.replace(/^\s+|\s+$/g," ")}return this};var mapStyle=mapStyle||{},markers=markers||{},Maptour=function(e,t,n){var a,r,i,s={mapTypeId:n.maps.MapTypeId.ROADMAP,mapStyles:mapStyle||{},markers:markers||{},markerGroups:{},markerIconSvg:"M25 0c-8.284 0-15 6.656-15 14.866 0 8.211 15 35.135 15 35.135s15-26.924 15-35.135c0-8.21-6.716-14.866-15-14.866zm-.049 19.312c-2.557 0-4.629-2.055-4.629-4.588 0-2.535 2.072-4.589 4.629-4.589 2.559 0 4.631 2.054 4.631 4.589 0 2.533-2.072 4.588-4.631 4.588z"},o={mapContainer:e.getElementById("map"),markerToggleHandler:e.querySelectorAll("#map-legend a"),popupOpenHandler:e.getElementsByClassName("resize-big"),popupCloseHandler:e.getElementsByClassName("resize-small")},p=[],l={map:{},init:function(){l.map=new n.maps.Map(o.mapContainer,{mapTypeId:s.mapTypeId,styles:s.mapStyles})},marker:{position:function(e,t){return new n.maps.LatLng(e,t)},icon:function(e){return{path:s.markerIconSvg,fillColor:e,fillOpacity:1,strokeColor:"#fff",strokeWeight:2,scale:.8}},infowindow:{content:function(e,t){var n='<div class="infowindow" id="infowindow-'+e.id+'">'+this.title(e.title)+this.image(e.image)+this.description(e.description)+this.navigation(t)+"</div>";return n},title:function(e){return"<h2>"+e+"</h2>"},description:function(e){return e?e:""},image:function(e){return e?'<img src="'+e+'" class="post-thumbnail" >':""},listener:function(e,t){n.maps.event.addListener(e,"click",function(t){for(var a=0;a<markers.length;a++)p[a].type!==i&&(p[a].setOptions({opacity:.3,clicked:0}),p[a].setZIndex(n.maps.Marker.MAX_ZINDEX-1));e.setOptions({opacity:1}),e.setZIndex(n.maps.Marker.MAX_ZINDEX+1),r&&r.close(),r=new n.maps.InfoWindow({content:this.info}),r.open(l.map,e),e.setOptions({clicked:1})})},create:function(e,t){return new n.maps.InfoWindow({content:l.marker.infowindow.content(e,t)})},navigation:function(e){var t='<a class="btn-next" href="javascript:Maptour.marker.infowindow.nav('+(parseInt(e)+1)+');"><i class="fa fa-long-arrow-right"></i></a>',n='<a class="btn-previous" href="javascript:Maptour.marker.infowindow.nav('+(parseInt(e)-1)+');"><i class="fa fa-long-arrow-left"></i></a>';parseInt(e)>0&&parseInt(e)<s.markers.length&&(links=n+t),parseInt(e)===s.markers.length-1&&(links=n),0===parseInt(e)&&(links=t);var a='<div class="infowindow-navigation"><span class="infowindow-navigation-header">Places navigation </span>'+links+"</div>";return a},nav:function(e){n.maps.event.trigger(p[e],"click")}},place:function(e,t){return new n.maps.Marker({position:l.marker.position(e.lat,e.lng),map:l.map,title:e.title,info:l.marker.infowindow.content(e,t),icon:l.marker.icon(markerGroups[e.type].color),type:e.type})}},placeMarkers:function(e){for(var t=0;t<e.length;t++)currentMarker=l.marker.place(e[t],t),a.extend(currentMarker.position),1!==markerGroups[e[t].type]["default"]&&currentMarker.setOptions({opacity:.3,strokeWeight:.1}),p.push(currentMarker),l.marker.infowindow.listener(currentMarker,e[t],t)},toggle_markers:function(e){for(var t=0,a=e.length;a>t;t++){var r=e[t];r.addEventListener("click",function(t){t.preventDefault();var r=this.getAttribute("data-type");i=r;for(var s=0;a>s;s++)e[s].setAttribute("class","hidden"),e[s].getAttribute("data-type")===r&&e[s].setAttribute("class","");for(var o=0;o<p.length;o++){var l=p[o];l.type===r?(l.setVisible(!0),l.setOptions({opacity:1,strokeWeight:1}),l.setZIndex(n.maps.Marker.MAX_ZINDEX+1)):(l.setOptions({opacity:.3,strokeWeight:.1}),l.setZIndex(n.maps.Marker.MAX_ZINDEX-1))}},!1)}},popup:{open:function(t){for(var r=0,i=t.length;i>r;r++)t[r].addEventListener("click",function(t){t.preventDefault();var r=(e.createEvent("event"),e.getElementById(this.getAttribute("data-map-container")));r.addClass("full"),n.maps.event.trigger(l.map,"resize"),l.map.fitBounds(a),this.style.display="none",r.children[0].style.display="block"},!1)},close:function(t){for(var r=0,i=t.length;i>r;r++)t[r].addEventListener("click",function(t){t.preventDefault();var r=e.getElementById(this.getAttribute("data-map-container"));r.removeClass("full"),n.maps.event.trigger(l.map,"resize"),l.map.fitBounds(a),this.style.display="none",r.children[1].style.display="block"},!1)},toggle:function(e,t){this.open(e),this.close(t)}},fitView:function(e){fitViewListener=n.maps.event.addListenerOnce(l.map,"bounds_changed",function(t){l.map.getZoom()&&l.map.setZoom(e)}),setTimeout(function(){n.maps.event.removeListener(fitViewListener)},2e3)}};return t.onload=function(){a=new n.maps.LatLngBounds,l.init(),l.placeMarkers(s.markers),l.map.fitBounds(a),l.fitView(13),l.map.panToBounds(a),l.toggle_markers(o.markerToggleHandler),l.popup.toggle(o.popupOpenHandler,o.popupCloseHandler)},l}(document,window,google,markers);